{
  "rules": {
      "housemates": {
          "$housemateid": {
              ".read": "auth !== null", 
              "name": {
                  ".validate": "newData.isString()"
              },
              "email": {},
              "houses": {},
              "$other": {".validate": false}
          }
      },
      "houses": {
          ".read": "auth !== null", 
      		".write": "auth !== null",
          "$housecode": { 
              "name": {
              
              },
              "members": {
                ".read": "auth !== null",
                ".write": "auth !== null"
              },
              "grocerylist": {
                ".read": "auth !== null", 
      		      ".write": "auth !== null"
              },
              "receipts": {
                ".read": "auth !== null", 
      		      ".write": "auth !== null"
              },
              "$other": {".validate": false}
          }
      },
      "grocerylists": {
          "$grocerylistid": {
              ".read": "auth !== null && root.child('houses/' + data.child('houseId').val() + '/members/' + auth.uid).exists()",  
              "name": {
                ".validate": "newData.isString() && root.child('houses/' + data.child('houseId').val() + '/name').val() === newData.val()"
              },
              "groceryitems": {
                  "$groceryitemid": {
                      ".validate": "newData.hasChildren(['name', 'quantity', 'splits'])",
                      ".indexOn": ["name"],
                      "name": {
                        ".validate": "newData.isString() && newData.val().length >= 1 && newData.val().length <= 30"
                      },
                      "quantity": {
                        ".validate": "newData.isNumber() && newData.val() >= 0"
                      },
                      "splits": {
                        "$key": {
                          ".validate": "newData.isNumber() && newData.val() >= 0"
                        }
                      },
                      "$other": {".validate": false}
                  }
              },
              "houseId": {
                ".validate": "newData.isString() && root.child('houses/' + data.child('houseId').val()).exists()"
              },
              "$other": {".validate": false}
          }
      },
      "receipts": {
          ".read": "auth !== null", 
      		".write": "auth !== null",
          "$receiptid": {

          }
      },
      "invites": {
        ".read": "auth !== null", 
      	".write": "auth !== null",
        ".indexOn": "expiresAt"
      }
  }
}